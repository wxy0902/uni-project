{"version":3,"sources":["webpack:////Users/wangxinyao/Documents/HBuilderProjects/project/仿微信wechat/pages/chat/chat.vue?82b2","webpack:////Users/wangxinyao/Documents/HBuilderProjects/project/仿微信wechat/pages/chat/chat.vue?f4a3","uni-app:///main.js","webpack:////Users/wangxinyao/Documents/HBuilderProjects/project/仿微信wechat/pages/chat/chat.vue?8c92","webpack:////Users/wangxinyao/Documents/HBuilderProjects/project/仿微信wechat/pages/chat/chat.vue?5f31","webpack:////Users/wangxinyao/Documents/HBuilderProjects/project/仿微信wechat/pages/chat/chat.vue?a86f","webpack:////Users/wangxinyao/Documents/HBuilderProjects/project/仿微信wechat/pages/chat/chat.vue?2c0a","uni-app:///pages/chat/chat.vue"],"names":["createPage","Page"],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAA8iD,CAAgB,o5CAAG,EAAC,C;;;;;;;;;;;ACAlkD;AACA,OAAO,KAAU,EAAE,kBAKd;;;;;;;;;;;;;kDCNL;AACA;AACA,yF;AACAA,UAAU,CAACC,aAAD,CAAV,C;;;;;;;;;;;;;ACHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA6H;AAC7H;AACwD;AACL;AACsC;;;AAGzF;AACmN;AACnN,gBAAgB,iNAAU;AAC1B,EAAE,0EAAM;AACR,EAAE,2FAAM;AACR,EAAE,oGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,+FAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA,WAAW,iPAEN;AACL,GAAG;AACH;AACA,WAAW,+NAEN;AACL,GAAG;AACH;AACA,WAAW,6PAEN;AACL,GAAG;AACH;AACA,WAAW,+NAEN;AACL;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC,mBAAO,CAAC,4BAAoB;AAClE,yCAAyC,mBAAO,CAAC,+BAAuB;;AAExE,WAAW,mBAAO,CAAC,0BAAkB;;AAErC;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AC5CA;AAAA;AAAA;AAAA;AAAi1B,CAAgB,kyBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACiHr2B;AACA,MADA,kBACA;AACA;AACA,sBADA;AAEA;AACA,mBADA;AAEA,iBAFA;AAGA,gBAHA,EAFA;;AAOA,qBAPA;AAQA,mBARA,EAQA;AACA,yBATA;AAUA,0BAVA,EAUA;AACA,uBAXA,EAWA;AACA,yBAZA;AAaA,wCAbA;AAcA,0CAdA;AAeA,sBAfA,EAeA;AACA,wBAhBA,EAgBA;AACA,yBAjBA;AAkBA,kBAlBA,EAkBA;AACA,mBAnBA,EAmBA;AACA,eApBA,EAoBA;AACA,8BArBA;AAsBA,uBAtBA,EAsBA;AACA,qBAvBA,EAuBA;AACA;AACA,gEADA;AAEA,kEAFA,CAxBA;;;AA6BA,GA/BA;AAgCA;AACA;AACA,YAFA,sBAEA;AACA,6BADA;;;;AAKA,sCALA;AAMA,wCANA,SAMA,IANA;AAOA;AACA,qBARA,GAQA,cARA,CAQA,KARA;AASA,mBATA,kBASA,oFATA;AAUA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAFA,EAEA,GAFA;AAGA;AACA,iBATA,EAZA;AAsBA,KAxBA;AAyBA;AACA,cA1BA,sBA0BA,GA1BA,EA0BA;AACA;AACA;AACA,YADA,CACA,GADA;AAEA,wBAFA,CAEA;AACA;AACA,0CADA;AAEA,4BAFA;;AAIA,OAPA;AAQA,UARA;AASA,KArCA;AAsCA;AACA,kBAvCA,4BAuCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BADA,EACA;AACA,6HAFA;AAGA,qGAHA,EAGA;AACA,sFAJA;AAKA,0BALA,EAKA;AACA,kCANA;AAOA,0BAPA,EAOA;AACA,+BARA,CAQA;AARA;AAUA;AACA;AACA,OAlBA;AAmBA;AACA;AACA;AACA;AACA,SAFA,EAEA,GAFA;AAGA,OALA;AAMA,KAjEA;AAkEA;AACA,kBAnEA,0BAmEA,IAnEA,EAmEA;AACA;AACA;AACA,KAtEA;AAuEA;AACA,aAxEA,uBAwEA;AACA;AACA;AACA;AACA,KA5EA;AA6EA;AACA,WA9EA,mBA8EA,IA9EA,EA8EA;AACA;AACA,iCADA,EACA;AACA,sCAFA;AAGA,gDAHA,EAGA;AACA,sCAJA;AAKA,oBALA,EAKA;AACA,8BANA;AAOA,sBAPA;;;AAUA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SANA,MAMA;AACA;AACA;AACA;AACA;AACA,OAZA,MAYA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA,4BADA;AAEA,uBAFA,CAEA;AAFA;A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","file":"pages/chat/chat.js","sourcesContent":["import mod from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./chat.vue?vue&type=style&index=0&id=bf16e7f4&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./chat.vue?vue&type=style&index=0&id=bf16e7f4&lang=scss&scoped=true&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1610597644380\n      var cssReload = require(\"/Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  ","import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pages/chat/chat.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./chat.vue?vue&type=template&id=bf16e7f4&scoped=true&\"\nvar renderjs\nimport script from \"./chat.vue?vue&type=script&lang=js&\"\nexport * from \"./chat.vue?vue&type=script&lang=js&\"\nimport style0 from \"./chat.vue?vue&type=style&index=0&id=bf16e7f4&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"bf16e7f4\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/chat/chat.vue\"\nexport default component.exports","export * from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./chat.vue?vue&type=template&id=bf16e7f4&scoped=true&\"","var components = {\n  uLoading: function() {\n    return import(\n      /* webpackChunkName: \"node-modules/uview-ui/components/u-loading/u-loading\" */ \"uview-ui/components/u-loading/u-loading.vue\"\n    )\n  },\n  uGrid: function() {\n    return import(\n      /* webpackChunkName: \"node-modules/uview-ui/components/u-grid/u-grid\" */ \"uview-ui/components/u-grid/u-grid.vue\"\n    )\n  },\n  uGridItem: function() {\n    return import(\n      /* webpackChunkName: \"node-modules/uview-ui/components/u-grid-item/u-grid-item\" */ \"uview-ui/components/u-grid-item/u-grid-item.vue\"\n    )\n  },\n  uIcon: function() {\n    return import(\n      /* webpackChunkName: \"node-modules/uview-ui/components/u-icon/u-icon\" */ \"uview-ui/components/u-icon/u-icon.vue\"\n    )\n  }\n}\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var m0 = _vm.chatType === \"voice\" ? require(\"@/static/voice.png\") : null\n  var m1 = _vm.chatType === \"keyboard\" ? require(\"@/static/keyboard.png\") : null\n\n  var m2 = require(\"@/static/add.png\")\n\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        m0: m0,\n        m1: m1,\n        m2: m2\n      }\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./chat.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./chat.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view class=\"content\">\r\n\t\t<view class=\"content-box\" @touchstart=\"touchstart\" id=\"content-box\" :class=\"{'content-showfn':showFunBtn}\">\r\n\t\t\t<!-- 背景图- 定位方式 -->\r\n\t\t\t<image class=\"content-box-bg\" :src=\"_user_info.chatBgImg\" :style=\"{ height: imgHeight }\"></image>\r\n\t\t\t<view class=\"content-box-loading\" v-if=\"!loading\"><u-loading mode=\"flower\"></u-loading></view>\r\n\t\t\t<view class=\"message\" v-for=\"(item, index) in messageList\" :key=\"index\" :id=\"`msg-${item.hasBeenSentId}`\">\r\n\t\t\t\t<view class=\"message-item \" :class=\"item.isItMe ? 'right' : 'left'\">\r\n\t\t\t\t\t<image class=\"img\" :src=\"item.fromUserHeadImg\" mode=\"\" @tap=\"linkToBusinessCard(item.fromUserId)\"></image>\r\n\t\t\t\t\t<!-- contentType = 1 文本 -->\r\n\t\t\t\t\t<view class=\"content\" v-if=\"item.contentType == 1\">{{ item.content }}</view>\r\n\t\t\t\t\t<!-- contentType = 2 语音 -->\r\n\t\t\t\t\t<view\r\n\t\t\t\t\t\tclass=\"content contentType2\"\r\n\t\t\t\t\t\t:class=\"[{ 'content-type-right': item.isItMe }]\"\r\n\t\t\t\t\t\tv-if=\"item.contentType == 2\"\r\n\t\t\t\t\t\t@tap=\"handleAudio(item)\"\r\n\t\t\t\t\t\thover-class=\"contentType2-hover-class\"\r\n\t\t\t\t\t\t:style=\"{width:`${130+(item.contentDuration*2)}rpx`}\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<view\r\n\t\t\t\t\t\t\tclass=\"voice_icon\"\r\n\t\t\t\t\t\t\t:class=\"[\r\n\t\t\t\t\t\t\t\t{ voice_icon_right: item.isItMe },\r\n\t\t\t\t\t\t\t\t{ voice_icon_left: !item.isItMe },\r\n\t\t\t\t\t\t\t\t{ voice_icon_right_an: item.anmitionPlay && item.isItMe },\r\n\t\t\t\t\t\t\t\t{ voice_icon_left_an: item.anmitionPlay && !item.isItMe }\r\n\t\t\t\t\t\t\t]\"\r\n\t\t\t\t\t\t></view>\r\n\t\t\t\t\t\t<view class=\"\">{{ item.contentDuration }}''</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<!-- contentType = 3 图片 -->\r\n\t\t\t\t\t<view \r\n\t\t\t\t\t\tclass=\"content contentType3\" \t\r\n\t\t\t\t\t\tv-if=\"item.contentType == 3\"\r\n\t\t\t\t\t\t@tap=\"viewImg([item.content])\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<image :src=\"item.content\" class=\"img\" mode=\"widthFix\"></image>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view> \r\n\t\t</view>\r\n\t\t\r\n\t\t<!-- 底部聊天输入框 -->\r\n\t\t<view class=\"input-box\" :class=\"{ 'input-box-mpInputMargin': mpInputMargin }\">\r\n\t\t\t<view class=\"input-box-flex\">\r\n\t\t\t\t<!-- #ifndef H5 -->\r\n\t\t\t\t<image v-if=\"chatType === 'voice'\" class=\"icon_img\" :src=\"require('@/static/voice.png')\"  @click=\"switchChatType('keyboard')\"></image>\r\n\t\t\t\t<image v-if=\"chatType === 'keyboard'\" class=\"icon_img\" :src=\"require('@/static/keyboard.png')\"  @click=\"switchChatType('voice')\"></image>\r\n\t\t\t\t<!-- #endif -->\r\n\t\t\t\t<view class=\"input-box-flex-grow\"> \r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\tv-if=\"chatType === 'voice'\"\r\n\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\tclass=\"content\"\r\n\t\t\t\t\t\tid=\"input\"\r\n\t\t\t\t\t\tv-model=\"formData.content\"\r\n\t\t\t\t\t\t:hold-keyboard=\"true\"\r\n\t\t\t\t\t\t:confirm-type=\"'send'\"\r\n\t\t\t\t\t\t:confirm-hold=\"true\"\r\n\t\t\t\t\t\tplaceholder-style=\"color:#DDDDDD;\"\r\n\t\t\t\t\t\t:cursor-spacing=\"10\"\r\n\t\t\t\t\t\t@confirm=\"sendMsg(null)\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<view\r\n\t\t\t\t\t\tclass=\"voice_title\"\r\n\t\t\t\t\t\tv-if=\"chatType === 'keyboard'\"\r\n\t\t\t\t\t\t:style=\"{ background: recording ? '#c7c6c6' : '#FFFFFF' }\"\r\n\t\t\t\t\t\t@touchstart.stop.prevent=\"startVoice\"\r\n\t\t\t\t\t\t@touchmove.stop.prevent=\"moveVoice\"\r\n\t\t\t\t\t\t@touchend.stop=\"endVoice\"\r\n\t\t\t\t\t\t@touchcancel.stop=\"cancelVoice\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{{ voiceTitle }}\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t\r\n\t\t\t\t<!-- 功能性按钮 -->\r\n\t\t\t\t<image class=\" icon_btn_add\" :src=\"require('@/static/add.png')\" @tap=\"switchFun\"></image>\r\n\t\t\t\t\r\n\t\t\t\t<!-- #ifdef H5 --> \r\n\t\t\t\t<button class=\"btn\" type=\"primary\" size=\"mini\" @touchend.prevent=\"sendMsg(null)\">发送</button>\r\n\t\t\t\t<!-- #endif -->\r\n\t\t\t</view>\r\n\t\t\t\r\n\t\t\t<view class=\"fun-box\" :class=\"{'show-fun-box':showFunBtn}\">\r\n\t\t\t\t<u-grid :col=\"4\"  hover-class=\"contentType2-hover-class\" :border=\"false\" @click=\"clickGrid\">\r\n\t\t\t\t\t<u-grid-item v-for=\"(item, index) in funList\" :index=\"index\" :key=\"index\" bg-color=\"#eaeaea\">\r\n\t\t\t\t\t\t<u-icon :name=\"item.icon\" :size=\"52\"></u-icon>\r\n\t\t\t\t\t\t<view class=\"grid-text\">{{ item.title }}</view>\r\n\t\t\t\t\t</u-grid-item>\r\n\t\t\t\t</u-grid>\r\n\t\t\t</view>\r\n\r\n\t\t</view>\r\n\t\t\r\n\t\t<!-- //语音动画 -->\r\n\t\t<view class=\"voice_an\"  v-if=\"recording\">\r\n\t\t\t<view class=\"voice_an_icon\">\r\n\t\t\t\t<view id=\"one\" class=\"wave\"></view>\r\n\t\t\t\t<view id=\"two\" class=\"wave\"></view>\r\n\t\t\t\t<view id=\"three\" class=\"wave\"></view>\r\n\t\t\t\t<view id=\"four\" class=\"wave\"></view>\r\n\t\t\t\t<view id=\"five\" class=\"wave\"></view>\r\n\t\t\t\t<view id=\"six\" class=\"wave\"></view>\r\n\t\t\t\t<view id=\"seven\" class=\"wave\"></view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"text\">{{voiceIconText}}</view>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tfromUserInfo: {},\r\n\t\t\tformData: {\r\n\t\t\t\tcontent: '',\r\n\t\t\t\tlimit: 15,\r\n\t\t\t\tindex: 1\r\n\t\t\t},\r\n\t\t\tmessageList: [],\r\n\t\t\tloading: true, //标识是否正在获取数据\r\n\t\t\timgHeight: '1000px',\r\n\t\t\tmpInputMargin: false, //适配微信小程序 底部输入框高度被顶起的问题\r\n\t\t\tchatType:\"voice\",  // 图标类型 'voice'语音 'keyboard'键盘\r\n\t\t\tvoiceTitle: '按住 说话',\r\n\t\t\tRecorder: uni.getRecorderManager(),\r\n\t\t\tAudio: uni.createInnerAudioContext(),\r\n\t\t\trecording: false, //标识是否正在录音\r\n\t\t\tisStopVoice: false, //加锁 防止点击过快引起的当录音正在准备(还没有开始录音)的时候,却调用了stop方法但并不能阻止录音的问题\r\n\t\t\tvoiceInterval:null,\r\n\t\t\tvoiceTime:0, //总共录音时长\r\n\t\t\tcanSend:true, //是否可以发送\r\n\t\t\tPointY:0, //坐标位置\r\n\t\t\tvoiceIconText:\"正在录音...\",\r\n\t\t\tshowFunBtn:false, //是否展示功能型按钮\r\n\t\t\tAudioExam:null, //正在播放音频的实例\r\n\t\t\tfunList: [\r\n\t\t\t\t{ icon:\"photo-fill\",title:\"照片\",uploadType:[\"album\"] },\r\n\t\t\t\t{ icon:\"camera-fill\",title:\"拍摄\",uploadType:[\"camera\"] },\r\n\t\t\t],\r\n\t\t};\r\n\t},\r\n\tmethods: {\r\n\t\t//拼接消息 处理滚动\r\n\t\tasync joinData() {\r\n\t\t\tif (!this.loading) {\r\n\t\t\t\t//如果没有获取数据 即loading为false时，return 避免用户重复上拉触发加载\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis.loading = false;\r\n\t\t\tconst data = await this.getMessageData();\r\n\t\t\t//获取节点信息\r\n\t\t\tconst { index } = this.formData;\r\n\t\t\tconst sel = `#msg-${index > 1 ? this.messageList[0].hasBeenSentId : data[data.length - 1].hasBeenSentId}`;\r\n\t\t\tthis.messageList = [...data, ...this.messageList];\r\n\t\t\t//填充数据后，视图会自动滚动到最上面一层然后瞬间再跳回bindScroll的指定位置 ---体验不是很好，后期优化\r\n\t\t\tthis.$nextTick(() => {\r\n\t\t\t\tthis.bindScroll(sel);\r\n\t\t\t\t//如果还有数据\r\n\t\t\t\tif (this.formData.limit >= data.length) {\r\n\t\t\t\t\tthis.formData.index++;\r\n\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\tthis.loading = true;\r\n\t\t\t\t\t}, 200);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\t//处理滚动\r\n\t\tbindScroll(sel, duration = 0) {\r\n\t\t\tconst query = uni.createSelectorQuery().in(this);\r\n\t\t\tquery\r\n\t\t\t\t.select(sel)\r\n\t\t\t\t.boundingClientRect(data => {\r\n\t\t\t\t\tuni.pageScrollTo({\r\n\t\t\t\t\t\tscrollTop: data && data.top - 40,\r\n\t\t\t\t\t\tduration\r\n\t\t\t\t\t});\r\n\t\t\t\t})\r\n\t\t\t\t.exec();\r\n\t\t},\r\n\t\t//获取消息\r\n\t\tgetMessageData() {\r\n\t\t\tlet getData = () => {\r\n\t\t\t\tlet arr = [];\r\n\t\t\t\tlet startIndex = (this.formData.index - 1) * this.formData.limit;\r\n\t\t\t\tlet endIndex = startIndex + this.formData.limit;\r\n\t\t\t\tfor (let i = startIndex; i < endIndex; i++) {\r\n\t\t\t\t\tconst isItMe = Math.random() > 0.5 ? true : false;\r\n\t\t\t\t\tarr.unshift({\r\n\t\t\t\t\t\thasBeenSentId: i, //已发送过去消息的id\r\n\t\t\t\t\t\tcontent: `很高兴认识你，这是第${i + 1}条消息。`,\r\n\t\t\t\t\t\tfromUserHeadImg: isItMe ? this._user_info.headImg : this.fromUserInfo.fromUserHeadImg, //用户头像\r\n\t\t\t\t\t\tfromUserId: isItMe ? this._user_info.id : this.fromUserInfo.fromUserId,\r\n\t\t\t\t\t\tisItMe, //true此条信息是我发送的 false别人发送的\r\n\t\t\t\t\t\tcreateTime: Date.now(),\r\n\t\t\t\t\t\tcontentType: 1, // 1文字文本 2语音\r\n\t\t\t\t\t\tanmitionPlay: false //标识音频是否在播放\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\treturn arr;\r\n\t\t\t};\r\n\t\t\treturn new Promise((resolve, reject) => {\r\n\t\t\t\tconst data = getData();\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tresolve(data);\r\n\t\t\t\t}, 500);\r\n\t\t\t});\r\n\t\t},\r\n\t\t//切换语音或者键盘方式\r\n\t\tswitchChatType(type) {\r\n\t\t\tthis.chatType = type;\r\n\t\t\tthis.showFunBtn =false;\r\n\t\t},\r\n\t\t//切换功能性按钮\r\n\t\tswitchFun(){\r\n\t\t\tthis.chatType = 'keyboard'\r\n\t\t\tthis.showFunBtn = !this.showFunBtn;\r\n\t\t\tuni.hideKeyboard()\r\n\t\t},\r\n\t\t//发送消息\r\n\t\tsendMsg(data) {\r\n\t\t\tconst params = {\r\n\t\t\t\thasBeenSentId: Date.now(), //已发送过去消息的id\r\n\t\t\t\tcontent: this.formData.content,\r\n\t\t\t\tfromUserHeadImg: this._user_info.headImg, //用户头像\r\n\t\t\t\tfromUserId: this._user_info.id,\r\n\t\t\t\tisItMe: true, //true此条信息是我发送的  false别人发送的\r\n\t\t\t\tcreateTime: Date.now(),\r\n\t\t\t\tcontentType: 1\r\n\t\t\t};\r\n\r\n\t\t\tif (data) {\r\n\t\t\t\tif(data.contentType == 2){\r\n\t\t\t\t\t//说明是发送语音\r\n\t\t\t\t\tparams.content = data.content;\r\n\t\t\t\t\tparams.contentType = data.contentType;\r\n\t\t\t\t\tparams.contentDuration = data.contentDuration;\r\n\t\t\t\t\tparams.anmitionPlay = false;\r\n\t\t\t\t}else if(data.contentType == 3){\r\n\t\t\t\t\t//发送图片\r\n\t\t\t\t\tparams.content = data.content;\r\n\t\t\t\t\tparams.contentType = data.contentType;\r\n\t\t\t\t}\r\n\t\t\t} else if (!this.$u.trim(this.formData.content)) {\r\n\t\t\t\t//验证输入框书否为空字符传\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tthis.messageList.push(params);\r\n\r\n\t\t\tthis.$nextTick(() => {\r\n\t\t\t\tthis.formData.content = '';\r\n\t\t\t\t// #ifdef MP-WEIXIN\r\n\t\t\t\t\tif(params.contentType == 1){\r\n\t\t\t\t\t\tuni.pageScrollTo({\r\n\t\t\t\t\t\t\tscrollTop: 99999,\r\n\t\t\t\t\t\t\tduration: 0, //小程序如果有滚动效果 input的焦点也会随着页面滚动...\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tsetTimeout(()=>{\r\n\t\t\t\t\t\t\tuni.pageScrollTo({\r\n\t\t\t\t\t\t\t\tscrollTop: 99999,\r\n\t\t\t\t\t\t\t\tduration: 0, //小程序如果有滚动效果 input的焦点也会随着页面滚动...\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t},150)\r\n\t\t\t\t\t}\r\n\t\t\t\t// #endif\r\n\t\t\t\t\t\r\n\t\t\t\t// #ifndef MP-WEIXIN\r\n\t\t\t\t\tuni.pageScrollTo({\r\n\t\t\t\t\t\tscrollTop: 99999,\r\n\t\t\t\t\t\tduration: 100\r\n\t\t\t\t\t});\r\n\t\t\t\t// #endif\r\n\t\t\t\t\r\n\t\t\t\tif(this.showFunBtn){\r\n\t\t\t\t\tthis.showFunBtn = false;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t// #ifdef MP-WEIXIN \r\n\t\t\t\tif (params.contentType == 1) {\r\n\t\t\t\t\tthis.mpInputMargin = true;\r\n\t\t\t\t} \r\n\t\t\t\t// #endif\r\n\t\t\t\t//h5浏览器并没有很好的办法控制键盘一直处于唤起状态 而且会有样式性的问题\r\n\t\t\t\t// #ifdef H5\r\n\t\t\t\tuni.hideKeyboard();\r\n\t\t\t\t// #endif\r\n\t\t\t});\r\n\t\t},\r\n\t\t//用户触摸屏幕的时候隐藏键盘\r\n\t\ttouchstart() {\r\n\t\t\tuni.hideKeyboard();\r\n\t\t},\r\n\t\t// userid 用户id\r\n\t\tlinkToBusinessCard(userId) {\r\n\t\t\tthis.$u.route({\r\n\t\t\t\turl: 'pages/businessCard/businessCard',\r\n\t\t\t\tparams: {\r\n\t\t\t\t\tuserId\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\t//准备开始录音\r\n\t\tstartVoice(e) {\r\n\t\t\tif(!this.Audio.paused){\r\n\t\t\t\t//如果音频正在播放 先暂停。\r\n\t\t\t\tthis.stopAudio(this.AudioExam)\r\n\t\t\t}\r\n\t\t\tthis.recording = true;\r\n\t\t\tthis.isStopVoice = false;\r\n\t\t\tthis.canSend = true;\r\n\t\t\tthis.voiceIconText = \"正在录音...\"\r\n\t\t\tthis.PointY = e.touches[0].clientY;\r\n\t\t\tthis.Recorder.start({\r\n\t\t\t\tformat: 'mp3'\r\n\t\t\t});\r\n\t\t},\r\n\t\t//录音已经开始\r\n\t\tbeginVoice(){\r\n\t\t\tif (this.isStopVoice) {\r\n\t\t\t\tthis.Recorder.stop();\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis.voiceTitle = '松开 结束'\r\n\t\t\tthis.voiceInterval =  setInterval(()=>{\r\n\t\t\t\tthis.voiceTime ++;\r\n\t\t\t},1000)\r\n\t\t},\r\n\t\t//move 正在录音中\r\n\t\tmoveVoice(e){\r\n\t\t\tconst PointY = e.touches[0].clientY\r\n\t\t\tconst slideY = this.PointY - PointY;\r\n\t\t\tif(slideY > uni.upx2px(120)){\r\n\t\t\t\tthis.canSend = false;\r\n\t\t\t\tthis.voiceIconText = '松开手指 取消发送 '\r\n\t\t\t}else if(slideY > uni.upx2px(60)){\r\n\t\t\t\tthis.canSend = true;\r\n\t\t\t\tthis.voiceIconText = '手指上滑 取消发送 '\r\n\t\t\t}else{\r\n\t\t\t\tthis.voiceIconText = '正在录音... '\r\n\t\t\t}\r\n\t\t},\r\n\t\t//结束录音\r\n\t\tendVoice() {\r\n\t\t\tthis.isStopVoice = true; //加锁 确保已经结束录音并不会录制\r\n\t\t\tthis.Recorder.stop();\r\n\t\t\tthis.voiceTitle = '按住 说话'\r\n\t\t},\r\n\t\t//录音被打断\r\n\t\tcancelVoice(e){\r\n\t\t\tthis.voiceTime = 0;\r\n\t\t\tthis.voiceTitle = '按住 说话';\r\n\t\t\tthis.canSend = false;\r\n\t\t\tthis.Recorder.stop();\r\n\t\t},\r\n\t\t//处理录音文件\r\n\t\thandleRecorder({ tempFilePath,duration }) {\r\n\t\t\tlet contentDuration;\r\n\t\t\t// #ifdef MP-WEIXIN\r\n\t\t\tthis.voiceTime = 0;\r\n\t\t\tif (duration < 600) {\r\n\t\t\t\tthis.voiceIconText=\"说话时间过短\";\r\n\t\t\t\tsetTimeout(()=>{\r\n\t\t\t\t\tthis.recording = false;\r\n\t\t\t\t},200)\r\n\t\t\t\treturn;\r\n\t\t\t} \r\n\t\t\tcontentDuration = duration/1000;\r\n\t\t\t// #endif\r\n\t\t\t\r\n\t\t\t// #ifdef APP-PLUS\r\n\t\t\tcontentDuration = this.voiceTime +1;\r\n\t\t\tthis.voiceTime = 0;\r\n\t\t\tif(contentDuration <= 0) {\r\n\t\t\t\tthis.voiceIconText=\"说话时间过短\";\r\n\t\t\t\tsetTimeout(()=>{\r\n\t\t\t\t\tthis.recording = false;\r\n\t\t\t\t},200)\r\n\t\t\t\treturn;\r\n\t\t\t};\r\n\t\t\t// #endif\r\n\t\t\t\r\n\t\t\tthis.recording = false;\r\n\t\t\tconst params = {\r\n\t\t\t\tcontentType: 2,\r\n\t\t\t\tcontent: tempFilePath,\r\n\t\t\t\tcontentDuration: Math.ceil(contentDuration)\r\n\t\t\t};\r\n\t\t\tthis.canSend && this.sendMsg(params);\r\n\t\t},\r\n\t\t//控制播放还是暂停音频文件\r\n\t\thandleAudio(item) {\r\n\t\t\tthis.AudioExam = item;\r\n\t\t\tthis.Audio.paused ? this.playAudio(item) : this.stopAudio(item);\r\n\t\t},\r\n\t\t//播放音频\r\n\t\tplayAudio(item) {\r\n\t\t\tthis.Audio.src = item.content;\r\n\t\t\tthis.Audio.hasBeenSentId = item.hasBeenSentId;\r\n\t\t\tthis.Audio.play();\r\n\t\t\titem.anmitionPlay = true;\r\n\t\t},\r\n\t\t//停止音频\r\n\t\tstopAudio(item) {\r\n\t\t\titem.anmitionPlay = false;\r\n\t\t\tthis.Audio.src = '';\r\n\t\t\tthis.Audio.stop();\r\n\t\t},\r\n\t\t//关闭动画\r\n\t\tcloseAnmition() {\r\n\t\t\tconst hasBeenSentId = this.Audio.hasBeenSentId;\r\n\t\t\tconst item = this.messageList.find(it => it.hasBeenSentId == hasBeenSentId);\r\n\t\t\titem.anmitionPlay = false;\r\n\t\t},\r\n\t\t//点击宫格时触发\r\n\t\tclickGrid(index){\r\n\t\t\tif(index == 0){\r\n\t\t\t\tthis.chooseImage(['album'])\r\n\t\t\t}else if(index == 1){\r\n\t\t\t\tthis.chooseImage(['camera'])\r\n\t\t\t}\r\n\t\t},\r\n\t\t//发送图片\r\n\t\tchooseImage(sourceType){\r\n\t\t\tuni.chooseImage({\r\n\t\t\t\tsourceType,\r\n\t\t\t\tsizeType:['compressed'], \r\n\t\t\t\tsuccess:res=>{ \r\n\t\t\t\t\tthis.showFunBtn = false;\r\n\t\t\t\t\tfor(let i = 0;i<res.tempFilePaths.length;i++){\r\n\t\t\t\t\t\tconst params = {\r\n\t\t\t\t\t\t\tcontentType: 3,\r\n\t\t\t\t\t\t\tcontent: res.tempFilePaths[i],\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\tthis.sendMsg(params)\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t},\r\n\t\t//查看大图\r\n\t\tviewImg(imgList){\r\n\t\t\tuni.previewImage({\r\n\t\t\t\turls: imgList,\r\n\t\t\t\t// #ifndef MP-WEIXIN\r\n\t\t\t\tindicator: 'number'\r\n\t\t\t\t// #endif\r\n\t\t\t});\r\n\t\t},\r\n\t},\r\n\tonPageScroll(e) {\r\n\t\tif (e.scrollTop < 50) {\r\n\t\t\tthis.joinData();\r\n\t\t}\r\n\t},\r\n\tonNavigationBarButtonTap({ index }) {\r\n\t\tif (index == 0) {\r\n\t\t\t//用户详情 设置\r\n\t\t} else if (index == 1) {\r\n\t\t\t//返回按钮\r\n\t\t\tthis.$u.route({\r\n\t\t\t\ttype: 'switchTab',\r\n\t\t\t\turl: 'pages/home/home'\r\n\t\t\t});\r\n\t\t}\r\n\t},\r\n\t//返回按钮事件\r\n\tonBackPress(e) {\r\n\t\t//以下内容对h5不生效\r\n\t\t//--所以如果用浏览器自带的返回按钮进行返回的时候页面不会重定向 正在寻找合适的解决方案\r\n\t\tthis.$u.route({\r\n\t\t\ttype: 'switchTab',\r\n\t\t\turl: 'pages/home/home'\r\n\t\t});\r\n\t\treturn true;\r\n\t},\r\n\tonLoad(info) {\r\n\t\t// { messageId,fromUserName,fromUserHeadImg } = info\r\n\t\tconst userInfo = this.firendList.filter(item => item.userId == info.fromUserId)[0];\r\n\t\tthis.fromUserInfo = {\r\n\t\t\tfromUserName: userInfo.userName,\r\n\t\t\tfromUserHeadImg: userInfo.headImg,\r\n\t\t\tfromUserId: userInfo.userId,\r\n\t\t\tmessageId: info.messageId\r\n\t\t};\r\n\r\n\t\t//录音开始事件\r\n\t\tthis.Recorder.onStart(e => {\r\n\t\t\t\r\n\t\t\tthis.beginVoice();\r\n\t\t});\r\n\t\t//录音结束事件\r\n\t\tthis.Recorder.onStop(res => {\r\n\t\t\tclearInterval(this.voiceInterval);\r\n\t\t\tthis.handleRecorder(res);\r\n\t\t});\r\n\r\n\t\t//音频停止事件\r\n\t\tthis.Audio.onStop(e => {\r\n\t\t\tthis.closeAnmition();\r\n\t\t});\r\n\r\n\t\t//音频播放结束事件\r\n\t\tthis.Audio.onEnded(e => {\r\n\t\t\tthis.closeAnmition();\r\n\t\t});\r\n\t},\r\n\tonReady() {\r\n\t\t//自定义返回按钮 因为原生的返回按钮不可阻止默认事件\r\n\t\t// #ifdef H5\r\n\t\tconst icon = document.getElementsByClassName('uni-page-head-btn')[0];\r\n\t\ticon.style.display = 'none';\r\n\t\t// #endif\r\n\r\n\t\tuni.setNavigationBarTitle({\r\n\t\t\ttitle: this.fromUserInfo.fromUserName\r\n\t\t});\r\n\t\tthis.joinData();\r\n\t\tuni.getSystemInfo({\r\n\t\t\tsuccess: res => {\r\n\t\t\t\tthis.imgHeight = res.windowHeight + 'px';\r\n\t\t\t}\r\n\t\t});\r\n\t\t\r\n\t\tuni.onKeyboardHeightChange(res => {\r\n\t\t\tif (res.height == 0) {\r\n\t\t\t\t// #ifdef MP-WEIXIN\r\n\t\t\t\tthis.mpInputMargin = false;\r\n\t\t\t\t// #endif\r\n\t\t\t}else{\r\n\t\t\t\tthis.showFunBtn = false;\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n @import './index.scss'\r\n</style>\r\n"],"sourceRoot":""}