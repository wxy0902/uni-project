<view class="content data-v-bf16e7f4"><view class="{{['content-box data-v-bf16e7f4',(showFunBtn)?'content-showfn':'']}}" id="content-box" data-event-opts="{{[['touchstart',[['touchstart',['$event']]]]]}}" bindtouchstart="__e"><image class="content-box-bg data-v-bf16e7f4" style="{{'height:'+(imgHeight)+';'}}" src="{{_user_info.chatBgImg}}"></image><block wx:if="{{!loading}}"><view class="content-box-loading data-v-bf16e7f4"><u-loading vue-id="6e1d75c0-1" mode="flower" class="data-v-bf16e7f4" bind:__l="__l"></u-loading></view></block><block wx:for="{{messageList}}" wx:for-item="item" wx:for-index="index" wx:key="index"><view class="message data-v-bf16e7f4" id="{{'msg-'+item.hasBeenSentId}}"><view class="{{['message-item  data-v-bf16e7f4',item.isItMe?'right':'left']}}"><image class="img data-v-bf16e7f4" src="{{item.fromUserHeadImg}}" mode data-event-opts="{{[['tap',[['linkToBusinessCard',['$0'],[[['messageList','',index,'fromUserId']]]]]]]}}" bindtap="__e"></image><block wx:if="{{item.contentType==1}}"><view class="content data-v-bf16e7f4">{{item.content}}</view></block><block wx:if="{{item.contentType==2}}"><view class="{{['content contentType2 data-v-bf16e7f4',[(item.isItMe)?'content-type-right':'']]}}" style="{{'width:'+(130+item.contentDuration*2+'rpx')+';'}}" hover-class="contentType2-hover-class" data-event-opts="{{[['tap',[['handleAudio',['$0'],[[['messageList','',index]]]]]]]}}" bindtap="__e"><view class="{{['voice_icon data-v-bf16e7f4',[(item.isItMe)?'voice_icon_right':''],[(!item.isItMe)?'voice_icon_left':''],[(item.anmitionPlay&&item.isItMe)?'voice_icon_right_an':''],[(item.anmitionPlay&&!item.isItMe)?'voice_icon_left_an':'']]}}"></view><view class="data-v-bf16e7f4">{{item.contentDuration+"''"}}</view></view></block><block wx:if="{{item.contentType==3}}"><view data-event-opts="{{[['tap',[['viewImg',[[item.content]]]]]]}}" class="content contentType3 data-v-bf16e7f4" bindtap="__e"><image class="img data-v-bf16e7f4" src="{{item.content}}" mode="widthFix"></image></view></block></view></view></block></view><view class="{{['input-box data-v-bf16e7f4',(mpInputMargin)?'input-box-mpInputMargin':'']}}"><view class="input-box-flex data-v-bf16e7f4"><block wx:if="{{chatType==='voice'}}"><image class="icon_img data-v-bf16e7f4" src="{{$root.m0}}" data-event-opts="{{[['tap',[['switchChatType',['keyboard']]]]]}}" bindtap="__e"></image></block><block wx:if="{{chatType==='keyboard'}}"><image class="icon_img data-v-bf16e7f4" src="{{$root.m1}}" data-event-opts="{{[['tap',[['switchChatType',['voice']]]]]}}" bindtap="__e"></image></block><view class="input-box-flex-grow data-v-bf16e7f4"><block wx:if="{{chatType==='voice'}}"><input class="content data-v-bf16e7f4" type="text" id="input" hold-keyboard="{{true}}" confirm-type="send" confirm-hold="{{true}}" placeholder-style="color:#DDDDDD;" cursor-spacing="{{10}}" data-event-opts="{{[['confirm',[['sendMsg',[null]]]],['input',[['__set_model',['$0','content','$event',[]],['formData']]]]]}}" value="{{formData.content}}" bindconfirm="__e" bindinput="__e"/></block><block wx:if="{{chatType==='keyboard'}}"><view data-event-opts="{{[['touchstart',[['startVoice',['$event']]]],['touchmove',[['moveVoice',['$event']]]],['touchend',[['endVoice',['$event']]]],['touchcancel',[['cancelVoice',['$event']]]]]}}" class="voice_title data-v-bf16e7f4" style="{{'background:'+(recording?'#c7c6c6':'#FFFFFF')+';'}}" catchtouchstart="__e" catchtouchmove="__e" catchtouchend="__e" catchtouchcancel="__e">{{''+voiceTitle+''}}</view></block></view><image class=" icon_btn_add data-v-bf16e7f4" src="{{$root.m2}}" data-event-opts="{{[['tap',[['switchFun',['$event']]]]]}}" bindtap="__e"></image></view><view class="{{['fun-box data-v-bf16e7f4',(showFunBtn)?'show-fun-box':'']}}"><u-grid vue-id="6e1d75c0-2" col="{{4}}" hover-class="contentType2-hover-class" border="{{false}}" data-event-opts="{{[['^click',[['clickGrid']]]]}}" bind:click="__e" class="data-v-bf16e7f4" bind:__l="__l" vue-slots="{{['default']}}"><block wx:for="{{funList}}" wx:for-item="item" wx:for-index="index" wx:key="index"><u-grid-item vue-id="{{('6e1d75c0-3-'+index)+','+('6e1d75c0-2')}}" index="{{index}}" bg-color="#eaeaea" class="data-v-bf16e7f4" bind:__l="__l" vue-slots="{{['default']}}"><u-icon vue-id="{{('6e1d75c0-4-'+index)+','+('6e1d75c0-3-'+index)}}" name="{{item.icon}}" size="{{52}}" class="data-v-bf16e7f4" bind:__l="__l"></u-icon><view class="grid-text data-v-bf16e7f4">{{item.title}}</view></u-grid-item></block></u-grid></view></view><block wx:if="{{recording}}"><view class="voice_an data-v-bf16e7f4"><view class="voice_an_icon data-v-bf16e7f4"><view class="wave data-v-bf16e7f4" id="one"></view><view class="wave data-v-bf16e7f4" id="two"></view><view class="wave data-v-bf16e7f4" id="three"></view><view class="wave data-v-bf16e7f4" id="four"></view><view class="wave data-v-bf16e7f4" id="five"></view><view class="wave data-v-bf16e7f4" id="six"></view><view class="wave data-v-bf16e7f4" id="seven"></view></view><view class="text data-v-bf16e7f4">{{voiceIconText}}</view></view></block></view>