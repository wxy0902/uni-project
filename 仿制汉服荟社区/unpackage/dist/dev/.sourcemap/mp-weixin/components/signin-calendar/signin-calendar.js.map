{"version":3,"sources":["webpack:////Users/wangxinyao/Documents/HBuilderProjects/project/仿制汉服荟社区/components/signin-calendar/signin-calendar.vue?ae66","webpack:////Users/wangxinyao/Documents/HBuilderProjects/project/仿制汉服荟社区/components/signin-calendar/signin-calendar.vue?e0ad","webpack:////Users/wangxinyao/Documents/HBuilderProjects/project/仿制汉服荟社区/components/signin-calendar/signin-calendar.vue?956a","webpack:////Users/wangxinyao/Documents/HBuilderProjects/project/仿制汉服荟社区/components/signin-calendar/signin-calendar.vue?ea81","uni-app:///components/signin-calendar/signin-calendar.vue","webpack:////Users/wangxinyao/Documents/HBuilderProjects/project/仿制汉服荟社区/components/signin-calendar/signin-calendar.vue?3959","webpack:////Users/wangxinyao/Documents/HBuilderProjects/project/仿制汉服荟社区/components/signin-calendar/signin-calendar.vue?70a4"],"names":[],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA4H;AAC5H;AACmE;AACL;AACa;;;AAG3E;AACmN;AACnN,gBAAgB,iNAAU;AAC1B,EAAE,qFAAM;AACR,EAAE,0FAAM;AACR,EAAE,mGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,8FAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA,WAAW,4KAEN;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACvBA;AAAA;AAAA;AAAA;AAA41B,CAAgB,6yBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACwCh3B,uE;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAIA;;;kBAIA,EACA,uBADA,EAGA,SACA;AACA,YACA,YADA,EAEA,WAFA,EAFA,EAHA,EAWA,IAXA,kBAWA,CACA,SACA;AACA,uBAFA,EAGA;AACA,cAJA,EAKA,SALA,EAMA,OANA,EAOA;AACA,iBARA,EASA,YATA,EAUA,UAVA,EAWA;AACA,uCAZA,EAaA,WAbA,EAcA,YAdA,EAeA,UAfA,GAiBA,CA7BA,EA+BA,YACA;AACA,WAFA,qBAEA,CACA,eACA,eACA,0EACA,0EACA,SACA,QADA,EAEA,QAFA;;AAIA,KAXA,EA/BA;;AA4CA,SA5CA,qBA4CA;AACA;AACA,GA9CA;;AAgDA;AACA;AACA,QAFA,kBAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAdA;AAeA;AACA,gBAhBA,0BAgBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAXA;AAYA,KA7BA;;AA+BA;AACA,aAhCA,qBAgCA,EAhCA,EAgCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAnDA;AAoDA;AACA,gBArDA,wBAqDA,QArDA,EAqDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uDADA;AAEA,yBAFA,EAEA;AACA,2BAHA,EAGA;AACA,yBAJA,EAIA;AACA,iDALA;AAMA,iBANA;;AAQA;AACA;AACA;AACA;AACA,0BADA;AAEA,0BAFA;AAGA,uBAHA;AAIA,sBAJA;;AAMA;AACA;AA9BA,iCA+BA,EA/BA;AAgCA;AACA;AACA;AACA;AACA,SAHA;AAIA;AACA;AACA,uBADA;AAEA,sBAFA;AAGA,wBAHA;AAIA,wBAJA;AAKA,0DALA,IAtCA,EA+BA;;AAcA;AACA;AACA;AACA;AACA;AACA,wBADA;AAEA,0BAFA;AAGA,uBAHA;AAIA,sBAJA;;AAMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BADA;AAEA,oBAFA;AAGA,kBAHA;AAIA,gBAJA;AAKA,kBALA;AAMA,8EANA;;AAQA;AACA;AA/HA,GAhDA,E;;;;;;;;;;;;AChDA;AAAA;AAAA;AAAA;AAA+sC,CAAgB,0mCAAG,EAAC,C;;;;;;;;;;;ACAnuC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"components/signin-calendar/signin-calendar.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./signin-calendar.vue?vue&type=template&id=0bff2418&\"\nvar renderjs\nimport script from \"./signin-calendar.vue?vue&type=script&lang=js&\"\nexport * from \"./signin-calendar.vue?vue&type=script&lang=js&\"\nimport style0 from \"./signin-calendar.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"components/signin-calendar/signin-calendar.vue\"\nexport default component.exports","export * from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./signin-calendar.vue?vue&type=template&id=0bff2418&\"","var components = {\n  iIcon: function() {\n    return import(\n      /* webpackChunkName: \"components/i-icon/i-icon\" */ \"@/components/i-icon/i-icon.vue\"\n    )\n  }\n}\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  if (!_vm._isMounted) {\n    _vm.e0 = function($event) {\n      _vm.calDate.use ? _vm.dataBefor(-1) : \"\"\n    }\n\n    _vm.e1 = function($event) {\n      _vm.calDate.end ? _vm.dataBefor(1) : \"\"\n    }\n  }\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./signin-calendar.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./signin-calendar.vue?vue&type=script&lang=js&\"","<template>\r\n  <view>\r\n    <!-- 顶部年月 -->\r\n    <view class=\"flexr-jsb flex-aic ptb8r plr18r bgwhite bbs2r\">\r\n      <view class='hw64r fcenter' @tap=\"calDate.use ? dataBefor(-1) : ''\">\r\n        <i-icon type=\"zuo\" size='42' color='#8F8F94' v-if=\"calDate.use\"></i-icon>\r\n      </view>\r\n      <view class=\"f28r c555\">\r\n        {{canlenderData.year || 2020}}年{{canlenderData.month || 1}}月\r\n      </view>\r\n      <view class=\"hw64r fcenter\" @tap=\"calDate.end ? dataBefor(1) : ''\">\r\n        <i-icon type=\"you\" size='42' color='#8F8F94' v-if=\"calDate.end\"></i-icon>\r\n      </view>\r\n    </view>\r\n    <!-- 日历表 -->\r\n    <view class=\"plr28r bgwhite h420r-min\">\r\n      <!-- 星期 -->\r\n      <view class=\"flexr-jsb\">\r\n        <view class=\"day\">日</view>\r\n        <view class=\"day\">一</view>\r\n        <view class=\"day\">二</view>\r\n        <view class=\"day\">三</view>\r\n        <view class=\"day\">四</view>\r\n        <view class=\"day\">五</view>\r\n        <view class=\"day\">六</view>\r\n      </view>\r\n      <!-- 日 -->\r\n      <block v-for=\"(week, weekIndex) in canlenderData.weeks\" :key=\"weekIndex\">\r\n        <view class=\"flexr-jsb\">\r\n          <view class=\"day\" :class=\"{'day-signin':day.signin, 'day-disable': day.disable}\" v-for=\"(day,dayIndex) in week\"\r\n            :key=\"dayIndex\">\r\n            {{day.date}}\r\n          </view>\r\n        </view>\r\n      </block>\r\n    </view>\r\n  </view>\r\n</template>\r\n\r\n<script>\r\n  import {\r\n    getSignInDateList\r\n  } from \"@/api/HanbiServer.js\"\r\n\r\n  /**  \r\n   * 签到日历组件\r\n   * @property {Object} date 指定日期  \r\n   */\r\n  export default {\r\n    name: 'signin-calendar',\r\n\r\n    props: {\r\n      // 指定日期\r\n      date: {\r\n        type: String,\r\n        default: ''\r\n      },\r\n    },\r\n\r\n    data() {\r\n      return {\r\n        // 日历数据\r\n        canlenderData: {},\r\n        // 当前年月日\r\n        year: '',\r\n        month: '',\r\n        day: '',\r\n        // 截止最新签到时间为当年当月\r\n        endYear: '',\r\n        endMonth: '',\r\n        endDay: '',\r\n        // 签到开通时间\r\n        useDate: new Date().toISOString(),\r\n        useYear: '',\r\n        useMonth: '',\r\n        useDay: '',\r\n      }\r\n    },\r\n\r\n    computed: {\r\n      // 计算日期范围上下翻\r\n      calDate() {\r\n        let use = true\r\n        let end = true\r\n        if (this.year == this.endYear && this.month == this.endMonth) end = false\r\n        if (this.year == this.useYear && this.month == this.useMonth) use = false\r\n        return {\r\n          use,\r\n          end\r\n        }\r\n      }\r\n    },\r\n    created() {\r\n      this.init()\r\n    },\r\n\r\n    methods: {\r\n      /// 初始化年月日\r\n      init() {\r\n        // 取日期对象\r\n        let now = this.date ? new Date(this.date) : new Date()\r\n        this.year = now.getFullYear()\r\n        this.month = now.getMonth() + 1\r\n        this.day = now.getDate()\r\n        // 最新签到年月\r\n        this.endYear = now.getFullYear()\r\n        this.endMonth = now.getMonth() + 1\r\n        this.endDay = now.getDate()\r\n        // 获取签到日历\r\n        this.fnSignInDate()\r\n      },\r\n      /// 获取签到日历\r\n      fnSignInDate(date = '') {\r\n        getSignInDateList(date).then(dateRes => {\r\n          this.useDate = dateRes.data.Remark.userdate\r\n          // 保存签到日历记录信息\r\n          this.$store.commit('setSigninDateData', dateRes.data.Data)\r\n          // 刷新日历\r\n          this.canlenderData = this.getCanlender(`${this.year}-${this.month}-${this.day}`)\r\n          // 用户最多回看年月日\r\n          let _useDate = new Date(dateRes.data.Remark.userdate)\r\n          this.useYear = _useDate.getFullYear()\r\n          this.useMonth = _useDate.getMonth() + 1\r\n          this.useDay = _useDate.getDate()\r\n        })\r\n      },\r\n\r\n      /// 切换前一月 -1|| 后一月 1\r\n      dataBefor(id) {\r\n        // 前一个月\r\n        if (id == -1) {\r\n          this.month = Number(this.month) - 1\r\n          if (this.month == 0) {\r\n            this.month = 12\r\n            this.year = Number(this.year) - 1\r\n          }\r\n        }\r\n        // 后一个月\r\n        if (id == 1) {\r\n          this.month = Number(this.month) + 1\r\n          if (this.month >= 13) {\r\n            this.month = 1\r\n            this.year = Number(this.year) + 1\r\n          }\r\n        }\r\n        // 获取签到日历\r\n        this.fnSignInDate(`${this.year}/${this.month}/1`)\r\n      },\r\n      /// 获取日历内容周分组\r\n      getCanlender(dateData) {\r\n        // 判断当前是 安卓还是ios ，传入不容的日期格式\r\n        if (typeof dateData !== 'object') {\r\n          dateData = dateData.replace(/-/g, '/')\r\n        }\r\n        // 获取年，月，日，星期\r\n        let _date = new Date(dateData)\r\n        let year = _date.getFullYear()\r\n        let month = _date.getMonth() + 1\r\n        let date = _date.getDate()\r\n        let day = _date.getDay()\r\n        // 日期数据对象\r\n        let dates = {\r\n          firstDay: new Date(year, month - 1, 1).getDay(),\r\n          lastMonthDays: [], // 上个月末尾几天\r\n          currentMonthDys: [], // 本月天数\r\n          nextMonthDays: [], // 下个月开始几天\r\n          endDay: new Date(year, month, 0).getDay(),\r\n          weeks: []\r\n        }\r\n        // 循环上个月末尾几天添加到数组\r\n        for (let i = dates.firstDay; i > 0; i--) {\r\n          const beforeDate = new Date(year, month - 1, -i + 1).getDate() + ''\r\n          dates.lastMonthDays.push({\r\n            date: beforeDate,\r\n            month: month - 1,\r\n            disable: true,\r\n            isDay: false\r\n          })\r\n        }\r\n        // 循环本月天数添加到数组\r\n        for (let i = 1; i <= new Date(year, month, 0).getDate(); i++) {\r\n          // 确认签到日期\r\n          let signin = this.$store.getters['getSigninDateData'].some(item => {\r\n            let _dataArr = item.SigninDate.split(' ')[0].split('-');\r\n            return (year == _dataArr[0] && month == _dataArr[1] && i == Number(_dataArr[2]));\r\n          });\r\n          //\r\n          dates.currentMonthDys.push({\r\n            date: i + '',\r\n            month: month,\r\n            signin: signin,\r\n            disable: false,\r\n            isDay: dateData == year + '/' + month + '/' + i\r\n          })\r\n        }\r\n        // 循环下个月开始几天 添加到数组\r\n        const surplus = 42 - (dates.lastMonthDays.length + dates.currentMonthDys.length)\r\n        for (let i = 1; i < surplus + 1; i++) {\r\n          dates.nextMonthDays.push({\r\n            date: i + '',\r\n            month: month + 1,\r\n            disable: true,\r\n            isDay: false\r\n          })\r\n        }\r\n        // 拼接数组  上个月开始几天 + 本月天数+ 下个月开始几天\r\n        let canlender = [].concat(dates.lastMonthDays, dates.currentMonthDys, dates.nextMonthDays)\r\n        // 日历分周\r\n        for (let i = 0; i < canlender.length; i++) {\r\n          if (i % 7 === 0) {\r\n            dates.weeks[parseInt(i / 7)] = new Array(7)\r\n          }\r\n          dates.weeks[parseInt(i / 7)][i % 7] = canlender[i]\r\n        }\r\n        return {\r\n          weeks: dates.weeks,\r\n          month: month,\r\n          date: date,\r\n          day: day,\r\n          year: year,\r\n          lastDate: dates.currentMonthDys[dates.currentMonthDys.length - 1].date\r\n        }\r\n      },\r\n      //\r\n    },\r\n  }\r\n</script>\r\n\r\n<style>\r\n  .h420r-min {\r\n    min-height: 420rpx;\r\n  }\r\n\r\n  .day {\r\n    width: 64rpx;\r\n    height: 64rpx;\r\n    line-height: 54rpx;\r\n    font-size: 24rpx;\r\n    color: #8F8F94;\r\n    text-align: center;\r\n  }\r\n\r\n  .day-signin {\r\n    color: #FF6699;\r\n    border: 2px #FF6699 solid;\r\n    border-radius: 50%;\r\n    overflow: hidden;\r\n    box-sizing: border-box;\r\n  }\r\n\r\n  .day-disable {\r\n    color: #EEEEEE;\r\n  }\r\n</style>\n","import mod from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./signin-calendar.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./signin-calendar.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1610611909255\n      var cssReload = require(\"/Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}